<div class="dashboard-container">
  <app-navbar></app-navbar>
  <div class="content-wrapper">
    <app-sidebar></app-sidebar>
    <div class="main-content">
      <div class="page-header">
        <h1>Dashboard</h1>
        <p>Overview of employee statistics</p>
      </div>

      <div *ngIf="isLoading" class="loading">Loading...</div>

      <div *ngIf="!isLoading && stats" class="dashboard-grid">
        <div class="stat-card primary">
          <div class="stat-icon">ğŸ‘¥</div>
          <div class="stat-info">
            <h3>Total Employees</h3>
            <p class="stat-number">{{ stats.total_employees }}</p>
          </div>
        </div>

        <div class="stat-card success">
          <div class="stat-icon">ğŸ‘¨</div>
          <div class="stat-info">
            <h3>Male Employees</h3>
            <p class="stat-number">{{ stats.male_employees }}</p>
          </div>
        </div>

        <div class="stat-card warning">
          <div class="stat-icon">ğŸ‘©</div>
          <div class="stat-info">
            <h3>Female Employees</h3>
            <p class="stat-number">{{ stats.female_employees }}</p>
          </div>
        </div>

        <div class="stat-card info">
          <div class="stat-icon">ğŸ“‹</div>
          <div class="stat-info">
            <h3>Permanent</h3>
            <p class="stat-number">{{ stats.permanent_employees }}</p>
          </div>
        </div>

        <div class="stat-card secondary">
          <div class="stat-icon">ğŸ“</div>
          <div class="stat-info">
            <h3>Temporary</h3>
            <p class="stat-number">{{ stats.temporary_employees }}</p>
          </div>
        </div>

        <div class="stat-card danger">
          <div class="stat-icon">ğŸ“„</div>
          <div class="stat-info">
            <h3>Contract</h3>
            <p class="stat-number">{{ stats.contract_employees }}</p>
          </div>
        </div>
      </div>

      <!-- Gender Distribution table -->
      <div *ngIf="!isLoading && stats" class="charts-section">
        <div class="chart-card">
          <h3>Gender Distribution</h3>
          <table class="gender-table">
            <thead>
              <tr>
                <th>Gender</th>
                <th>Count</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Male</td>
                <td>{{ stats.male_employees }}</td>
              </tr>
              <tr>
                <td>Female</td>
                <td>{{ stats.female_employees }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Employment Type Distribution (ALWAYS VISIBLE TEST) -->
<div style="background: white; padding: 25px; margin: 20px 0; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
  <h3 style="margin: 0 0 20px 0; font-size: 18px; color: #2c3e50;">Employment Type Distribution</h3>
  <div style="width: 100%; border: 1px solid #ddd; border-radius: 8px; overflow: hidden;">
    <table style="width: 100%; border-collapse: collapse;">
      <thead style="background: #f5f5f5;">
        <tr>
          <th style="padding: 15px 20px; text-align: left; font-weight: bold; border-bottom: 1px solid #ddd;">Type</th>
          <th style="padding: 15px 20px; text-align: right; font-weight: bold; border-bottom: 1px solid #ddd;">Count</th>
        </tr>
      </thead>
      <tbody>
        <tr style="background: white;">
          <td style="padding: 15px 20px; border-bottom: 1px solid #eee;">Permanent</td>
          <td style="padding: 15px 20px; text-align: right; font-weight: bold; border-bottom: 1px solid #eee;">{{ stats.permanent_employees }}</td>
        </tr>
        <tr style="background: #f9f9f9;">
          <td style="padding: 15px 20px; border-bottom: 1px solid #eee;">Temporary</td>
          <td style="padding: 15px 20px; text-align: right; font-weight: bold; border-bottom: 1px solid #eee;">{{ stats.temporary_employees }}</td>
        </tr>
        <tr style="background: white;">
          <td style="padding: 15px 20px;">Contract</td>
          <td style="padding: 15px 20px; text-align: right; font-weight: bold;">{{ stats.contract_employees }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>


      <div *ngIf="!isLoading && stats" class="charts-section">
        <div class="chart-card">
          <h3>Department Distribution</h3>
          <div class="chart-list">
            <div *ngFor="let dept of stats.department_wise" class="chart-item">
              <span class="chart-label">{{ dept.department__name }}</span>
              <span class="chart-value">{{ dept.count }}</span>
            </div>
          </div>
        </div>

        <div class="chart-card">
          <h3>Company Distribution</h3>
          <div class="chart-list">
            <div *ngFor="let comp of stats.company_wise" class="chart-item">
              <span class="chart-label">{{ comp.company__name }}</span>
              <span class="chart-value">{{ comp.count }}</span>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
